(function(){"use strict";var e={6412:function(e,t,i){var l=i(5130),a=i(6768);function o(e,t,i,l,o,s){const n=(0,a.g2)("router-view");return(0,a.uX)(),(0,a.Wv)(n)}var s={name:"App"},n=i(1241);const r=(0,n.A)(s,[["render",o]]);var u=r,c=i(1387),v=(i(4114),i(4232)),d=i(144),g=(i(8992),i(2577),i(7550),i(4373));class p{tryLogin(e,t){return new Promise(((i,l)=>{const a=JSON.parse(localStorage.getItem("users")||"[]"),o=a.find((i=>i.id===e&&i.apiKey===t));o?i(o):l(new Error("Login failed. Please check your email or API key."))}))}tryRegister(e,t,i){return new Promise(((l,a)=>{try{const o=JSON.parse(localStorage.getItem("users")||"[]"),s=o.some((t=>t.id===e));if(s)return a(new Error("User already exists"));const n={id:e,password:t,apiKey:i};o.push(n),localStorage.setItem("users",JSON.stringify(o)),l()}catch(o){return a(o instanceof Error?o.message:"An unknown error occurred")}}))}async validateApiKey(e){try{const t=await g.A.get(`https://api.themoviedb.org/3/movie/popular?api_key=${e}`);return 200===t.status}catch(t){return console.error("API Key validation failed:",t),!1}}}const h=new p,k={class:"container"},m={id:"phone"},b={id:"content-wrapper"},f={class:"checkbox remember"},w=["disabled"],L={class:"checkbox remember"},y=["disabled"];var C={__name:"SignIn",setup(e){const t=(0,c.rd)(),i=(0,d.KR)(!0),o=(0,d.KR)(""),s=(0,d.KR)(""),n=(0,d.KR)(""),r=(0,d.KR)(""),u=(0,d.KR)(!1),g=(0,d.KR)(!1),p=(0,d.KR)(!1),C=(0,d.KR)(!1),K=(0,d.KR)(!1),M=(0,d.KR)(!1),_=()=>{i.value=!i.value},E=e=>{"email"===e&&(p.value=!0),"apiKey"===e&&(C.value=!0),"registerEmail"===e&&(K.value=!0),"registerPassword"===e&&(M.value=!0)},I=e=>{"email"===e&&(p.value=!1),"apiKey"===e&&(C.value=!1),"registerEmail"===e&&(K.value=!1),"registerPassword"===e&&(M.value=!1)},R=(0,a.EW)((()=>o.value&&s.value)),W=(0,a.EW)((()=>n.value&&r.value&&s.value&&g.value)),P=async()=>{try{const e=await h.validateApiKey(s.value);if(!e)return void alert("Invalid TMDB API Key");await h.tryLogin(o.value,s.value);localStorage.setItem("TMDb-Key",s.value),t.push("/")}catch(e){alert(e.message)}},X=async()=>{try{const e=await h.validateApiKey(s.value);if(!e)return void alert("Invalid TMDB API Key");await h.tryRegister(n.value,r.value,s.value),alert("Registration successful! Please log in."),_()}catch(e){alert(e.message)}};return(e,t)=>((0,a.uX)(),(0,a.CE)("div",null,[t[28]||(t[28]=(0,a.Lk)("div",{class:"bg-image"},null,-1)),(0,a.Lk)("div",k,[(0,a.Lk)("div",m,[(0,a.Lk)("div",b,[(0,a.Lk)("div",{class:(0,v.C4)(["card",{hidden:!i.value}]),id:"login"},[(0,a.Lk)("form",{onSubmit:(0,l.D$)(P,["prevent"])},[t[20]||(t[20]=(0,a.Lk)("h1",null,"로그인",-1)),(0,a.Lk)("div",{class:(0,v.C4)(["input",{active:p.value||o.value}])},[(0,a.bo)((0,a.Lk)("input",{id:"email",type:"email","onUpdate:modelValue":t[0]||(t[0]=e=>o.value=e),onFocus:t[1]||(t[1]=e=>E("email")),onBlur:t[2]||(t[2]=e=>I("email"))},null,544),[[l.Jo,o.value]]),t[17]||(t[17]=(0,a.Lk)("label",{for:"email"},"Email",-1))],2),(0,a.Lk)("div",{class:(0,v.C4)(["input",{active:C.value||s.value}])},[(0,a.bo)((0,a.Lk)("input",{id:"api-key",type:"password","onUpdate:modelValue":t[3]||(t[3]=e=>s.value=e),onFocus:t[4]||(t[4]=e=>E("apiKey")),onBlur:t[5]||(t[5]=e=>I("apiKey"))},null,544),[[l.Jo,s.value]]),t[18]||(t[18]=(0,a.Lk)("label",{for:"api-key"},"Password",-1))],2),(0,a.Lk)("span",f,[(0,a.bo)((0,a.Lk)("input",{type:"checkbox",id:"remember","onUpdate:modelValue":t[6]||(t[6]=e=>u.value=e)},null,512),[[l.lH,u.value]]),t[19]||(t[19]=(0,a.Lk)("label",{for:"remember",class:"read-text"},"자동로그인",-1))]),(0,a.Lk)("button",{disabled:!R.value},"Login",8,w)],32),(0,a.Lk)("a",{href:"javascript:void(0)",class:"account-check",onClick:_},t[21]||(t[21]=[(0,a.eW)(" 계정이 있으신가요? "),(0,a.Lk)("b",null,"로그인",-1)]))],2),(0,a.Lk)("div",{class:(0,v.C4)(["card",{hidden:i.value}]),id:"register"},[(0,a.Lk)("form",{onSubmit:(0,l.D$)(X,["prevent"])},[t[26]||(t[26]=(0,a.Lk)("h1",null,"Sign up",-1)),(0,a.Lk)("div",{class:(0,v.C4)(["input",{active:K.value||n.value}])},[(0,a.bo)((0,a.Lk)("input",{id:"register-email",type:"email","onUpdate:modelValue":t[7]||(t[7]=e=>n.value=e),onFocus:t[8]||(t[8]=e=>E("registerEmail")),onBlur:t[9]||(t[9]=e=>I("registerEmail"))},null,544),[[l.Jo,n.value]]),t[22]||(t[22]=(0,a.Lk)("label",{for:"register-email"},"Email",-1))],2),(0,a.Lk)("div",{class:(0,v.C4)(["input",{active:M.value||r.value}])},[(0,a.bo)((0,a.Lk)("input",{id:"register-password",type:"password","onUpdate:modelValue":t[10]||(t[10]=e=>r.value=e),onFocus:t[11]||(t[11]=e=>E("registerPassword")),onBlur:t[12]||(t[12]=e=>I("registerPassword"))},null,544),[[l.Jo,r.value]]),t[23]||(t[23]=(0,a.Lk)("label",{for:"register-password"},"Password",-1))],2),(0,a.Lk)("div",{class:(0,v.C4)(["input",{active:C.value||s.value}])},[(0,a.bo)((0,a.Lk)("input",{id:"api-key",type:"password","onUpdate:modelValue":t[13]||(t[13]=e=>s.value=e),onFocus:t[14]||(t[14]=e=>E("apiKey")),onBlur:t[15]||(t[15]=e=>I("apiKey"))},null,544),[[l.Jo,s.value]]),t[24]||(t[24]=(0,a.Lk)("label",{for:"api-key"},"한번 더 입력",-1))],2),(0,a.Lk)("span",L,[(0,a.bo)((0,a.Lk)("input",{type:"checkbox",id:"terms","onUpdate:modelValue":t[16]||(t[16]=e=>g.value=e)},null,512),[[l.lH,g.value]]),t[25]||(t[25]=(0,a.Lk)("label",{for:"terms",class:"read-text"},[(0,a.eW)(" 동의하기 "),(0,a.Lk)("b")],-1))]),(0,a.Lk)("button",{disabled:!W.value},"회원가입",8,y)],32),(0,a.Lk)("a",{href:"javascript:void(0)",class:"account-check",onClick:_},t[27]||(t[27]=[(0,a.eW)(" 가입하셨나요? "),(0,a.Lk)("b",null,"회원가입",-1)]))],2)])])])]))}};const K=(0,n.A)(C,[["__scopeId","data-v-47c75714"]]);var M=K;const _={id:"app"},E={id:"container"};function I(e,t,i,l,o,s){const n=(0,a.g2)("Header"),r=(0,a.g2)("router-view");return(0,a.uX)(),(0,a.CE)("div",_,[(0,a.bF)(n),(0,a.Lk)("div",E,[(0,a.bF)(r)])])}const R={id:"container"},W={class:"header-left"},P={class:"logo"},X={class:"nav-links desktop-nav"},A={class:"header-right"},S={key:0,class:"user-menu"};function F(e,t,i,l,o,s){const n=(0,a.g2)("font-awesome-icon"),r=(0,a.g2)("router-link");return(0,a.uX)(),(0,a.CE)("div",R,[(0,a.Lk)("header",{class:(0,v.C4)(["app-header",{scrolled:l.isScrolled}])},[(0,a.Lk)("div",W,[(0,a.Lk)("div",P,[(0,a.bF)(r,{to:"/"},{default:(0,a.k6)((()=>[(0,a.bF)(n,{icon:"cube",style:{color:"rgba(242, 0, 255, 0.8)"}})])),_:1})]),(0,a.Lk)("nav",X,[(0,a.Lk)("ul",null,[(0,a.Lk)("li",null,[(0,a.bF)(r,{to:"/"},{default:(0,a.k6)((()=>t[4]||(t[4]=[(0,a.eW)("홈")]))),_:1})]),(0,a.Lk)("li",null,[(0,a.bF)(r,{to:"/popular"},{default:(0,a.k6)((()=>t[5]||(t[5]=[(0,a.eW)("요즘 핫한")]))),_:1})]),(0,a.Lk)("li",null,[(0,a.bF)(r,{to:"/wishlist"},{default:(0,a.k6)((()=>t[6]||(t[6]=[(0,a.eW)("위시 리스트")]))),_:1})]),(0,a.Lk)("li",null,[(0,a.bF)(r,{to:"/search"},{default:(0,a.k6)((()=>t[7]||(t[7]=[(0,a.eW)("카테고리")]))),_:1})])])])]),(0,a.Lk)("div",A,[(0,a.Lk)("button",{class:"icon-button",onClick:t[0]||(t[0]=(...e)=>l.toggleUserMenu&&l.toggleUserMenu(...e))},[(0,a.bF)(n,{icon:"user"})]),(0,a.Lk)("button",{class:"icon-button mobile-menu-button",onClick:t[1]||(t[1]=(...e)=>l.toggleMobileMenu&&l.toggleMobileMenu(...e))},[(0,a.bF)(n,{icon:"bars"})]),l.showUserMenu?((0,a.uX)(),(0,a.CE)("div",S,[(0,a.Lk)("button",{class:"logout-button",onClick:t[2]||(t[2]=(...e)=>l.removeKey&&l.removeKey(...e))},"Logout")])):(0,a.Q3)("",!0)])],2),(0,a.Lk)("div",{class:(0,v.C4)(["mobile-nav",{open:l.isMobileMenuOpen}])},[(0,a.Lk)("button",{class:"close-button",onClick:t[3]||(t[3]=(...e)=>l.toggleMobileMenu&&l.toggleMobileMenu(...e))},[(0,a.bF)(n,{icon:"times"})]),(0,a.Lk)("nav",null,[(0,a.Lk)("ul",null,[(0,a.Lk)("li",null,[(0,a.bF)(r,{to:"/",onClick:l.toggleMobileMenu},{default:(0,a.k6)((()=>t[8]||(t[8]=[(0,a.eW)("홈")]))),_:1},8,["onClick"])]),(0,a.Lk)("li",null,[(0,a.bF)(r,{to:"/popular",onClick:l.toggleMobileMenu},{default:(0,a.k6)((()=>t[9]||(t[9]=[(0,a.eW)("요즘 핫한")]))),_:1},8,["onClick"])]),(0,a.Lk)("li",null,[(0,a.bF)(r,{to:"/wishlist",onClick:l.toggleMobileMenu},{default:(0,a.k6)((()=>t[10]||(t[10]=[(0,a.eW)("위시 리스트")]))),_:1},8,["onClick"])]),(0,a.Lk)("li",null,[(0,a.bF)(r,{to:"/search",onClick:l.toggleMobileMenu},{default:(0,a.k6)((()=>t[11]||(t[11]=[(0,a.eW)("카테고리")]))),_:1},8,["onClick"])])])])],2)])}var U=i(8950),T=i(2353),$=i(292);U.Yv.add(T.MjD,T.X46,T.br3,T.ycA,T.ckx,T.GRI);var V={name:"AppHeader",components:{FontAwesomeIcon:$.gc},setup(){const e=(0,d.KR)(!1),t=(0,d.KR)(!1),i=(0,d.KR)(!1),l=(0,c.rd)(),o=()=>{e.value=window.scrollY>50},s=()=>{t.value=!t.value},n=()=>{i.value=!i.value},r=()=>{localStorage.removeItem("TMDb-Key"),l.push("/signin")};return(0,a.sV)((()=>{window.addEventListener("scroll",o)})),(0,a.hi)((()=>{window.removeEventListener("scroll",o)})),{isScrolled:e,isMobileMenuOpen:t,showUserMenu:i,toggleMobileMenu:s,toggleUserMenu:n,removeKey:r}}};const O=(0,n.A)(V,[["render",F],["__scopeId","data-v-73b1858e"]]);var x=O,j=(0,a.pM)({name:"Home",components:{Header:x}});const G=(0,n.A)(j,[["render",I],["__scopeId","data-v-1a047fab"]]);var B=G;const H={class:"home"},D={class:"movie-section"},Q={class:"movie-row"},z=["onClick"],J=["src","alt"],N={class:"movie-section"},q={class:"movie-row"},Y=["onClick"],Z=["src","alt"],ee={class:"movie-section"},te={class:"movie-row"},ie=["onClick"],le=["src","alt"];function ae(e,t,i,l,o,s){const n=(0,a.g2)("Banner");return(0,a.uX)(),(0,a.CE)("div",H,[(0,a.bF)(n,{movie:l.featuredMovie},null,8,["movie"]),(0,a.Lk)("section",D,[t[0]||(t[0]=(0,a.Lk)("h2",null,"인기영화",-1)),(0,a.Lk)("div",Q,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(l.popularMovies,(e=>((0,a.uX)(),(0,a.CE)("div",{key:e.id,class:"movie-card",onClick:t=>l.toggleWishlist(e)},[(0,a.Lk)("img",{src:`https://image.tmdb.org/t/p/w500${e.poster_path}`,alt:e.title},null,8,J),(0,a.Lk)("p",null,(0,v.v_)(e.title),1),(0,a.Lk)("span",{class:(0,v.C4)(["wishlist-indicator",{active:l.isInWishlist(e.id)}])}," ♥ ",2)],8,z)))),128))])]),(0,a.Lk)("section",N,[t[1]||(t[1]=(0,a.Lk)("h2",null,"신작",-1)),(0,a.Lk)("div",q,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(l.newReleases,(e=>((0,a.uX)(),(0,a.CE)("div",{key:e.id,class:"movie-card",onClick:t=>l.toggleWishlist(e)},[(0,a.Lk)("img",{src:`https://image.tmdb.org/t/p/w500${e.poster_path}`,alt:e.title},null,8,Z),(0,a.Lk)("p",null,(0,v.v_)(e.title),1),(0,a.Lk)("span",{class:(0,v.C4)(["wishlist-indicator",{active:l.isInWishlist(e.id)}])}," ♥ ",2)],8,Y)))),128))])]),(0,a.Lk)("section",ee,[t[2]||(t[2]=(0,a.Lk)("h2",null,"액션영화",-1)),(0,a.Lk)("div",te,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(l.actionMovies,(e=>((0,a.uX)(),(0,a.CE)("div",{key:e.id,class:"movie-card",onClick:t=>l.toggleWishlist(e)},[(0,a.Lk)("img",{src:`https://image.tmdb.org/t/p/w500${e.poster_path}`,alt:e.title},null,8,le),(0,a.Lk)("p",null,(0,v.v_)(e.title),1),(0,a.Lk)("span",{class:(0,v.C4)(["wishlist-indicator",{active:l.isInWishlist(e.id)}])}," ♥ ",2)],8,ie)))),128))])])])}const oe={class:"banner-content"},se={key:1};function ne(e,t,i,l,o,s){return i.movie?((0,a.uX)(),(0,a.CE)("div",{key:0,class:"banner",style:(0,v.Tr)({backgroundImage:`url(${s.backdropUrl})`})},[(0,a.Lk)("div",oe,[(0,a.Lk)("h1",null,(0,v.v_)(i.movie.title),1),(0,a.Lk)("p",null,(0,v.v_)(i.movie.overview),1),t[0]||(t[0]=(0,a.Lk)("button",{class:"play-btn title-btn"},"재생",-1)),t[1]||(t[1]=(0,a.Lk)("button",{class:"info-btn title-btn"},"상세 정보",-1))])],4)):((0,a.uX)(),(0,a.CE)("div",se,t[2]||(t[2]=[(0,a.Lk)("p",null,"Loading banner...",-1)])))}var re={name:"Banner",props:{movie:{type:Object,required:!1,default:()=>null}},computed:{backdropUrl(){return this.movie?.backdrop_path?`https://image.tmdb.org/t/p/original${this.movie.backdrop_path}`:""}}};const ue=(0,n.A)(re,[["render",ne],["__scopeId","data-v-1ffdcab2"]]);var ce=ue;class ve{async fetchFeaturedMovie(e){try{const t=await g.A.get(`https://api.themoviedb.org/3/movie/popular?api_key=${e}&language=ko-KR`);return console.log(t.data.results[0]),t.data.results[0]}catch(t){throw console.error("Error fetching featured movie:",t),t}}getURL4PopularMovies(e,t=1){return`https://api.themoviedb.org/3/movie/popular?api_key=${e}&language=ko-KR&page=${t}`}getURL4ReleaseMovies(e,t=2){return`https://api.themoviedb.org/3/movie/now_playing?api_key=${e}&language=ko-KR&page=${t}`}getURL4GenreMovies(e,t,i=1){return`https://api.themoviedb.org/3/discover/movie?api_key=${e}&with_genres=${t}&language=ko-KR&page=${i}`}}const de=new ve;var ge=i(1114);i(4520);class pe{constructor(){(0,ge.A)(this,"wishlist",void 0),this.wishlist=(0,d.KR)(this.loadWishlist())}loadWishlist(){const e=localStorage.getItem("movieWishlist");return e?JSON.parse(e):[]}saveWishlist(){localStorage.setItem("movieWishlist",JSON.stringify(this.wishlist.value))}toggleWishlist(e){const t=this.wishlist.value.findIndex((t=>t.id===e.id));-1===t?this.wishlist.value.push({id:e.id,title:e.title,poster_path:e.poster_path||""}):this.wishlist.value=this.wishlist.value.filter((t=>t.id!==e.id)),this.saveWishlist()}isInWishlist(e){return this.wishlist.value.some((t=>t.id===e))}getCurrentWishlist(){return this.wishlist.value}get wishlist$(){return(0,a.EW)((()=>this.wishlist.value))}}const he=new pe;var ke={name:"HomeMain",components:{Banner:ce},setup(){const e=localStorage.getItem("TMDb-Key"),t=(0,d.KR)({title:"",overview:"",backdrop_path:""}),i=(0,d.KR)([]),l=(0,d.KR)([]),o=(0,d.KR)([]),s=async()=>{try{if(!e)return alert("API Key missing. Redirecting to login."),void(location.href="/signIn");const a=await fetch(de.getURL4PopularMovies(e));i.value=(await a.json()).results;const s=await fetch(de.getURL4ReleaseMovies(e));l.value=(await s.json()).results;const n=await fetch(de.getURL4GenreMovies(e,"28"));if(o.value=(await n.json()).results,i.value.length>=5){const e=i.value[4];t.value={title:e.title,overview:e.overview,backdrop_path:e.backdrop_path}}}catch(a){console.error("Failed to load movies:",a)}},n=e=>{he.toggleWishlist(e)},r=e=>he.isInWishlist(e);return(0,a.sV)((()=>{s()})),{featuredMovie:t,popularMovies:i,newReleases:l,actionMovies:o,toggleWishlist:n,isInWishlist:r}}};const me=(0,n.A)(ke,[["render",ae],["__scopeId","data-v-e1efb568"]]);var be=me;const fe={class:"popular-container"},we={class:"view-toggle"};function Le(e,t,i,l,o,s){const n=(0,a.g2)("font-awesome-icon"),r=(0,a.g2)("MovieGrid"),u=(0,a.g2)("MovieInfiniteScroll");return(0,a.uX)(),(0,a.CE)("div",fe,[(0,a.Lk)("div",we,[(0,a.Lk)("button",{onClick:t[0]||(t[0]=t=>e.setView("grid")),class:(0,v.C4)({active:"grid"===e.currentView})},[(0,a.bF)(n,{icon:e.faTh},null,8,["icon"])],2),(0,a.Lk)("button",{onClick:t[1]||(t[1]=t=>e.setView("list")),class:(0,v.C4)({active:"list"===e.currentView})},[(0,a.bF)(n,{icon:e.faBars},null,8,["icon"])],2)]),"grid"===e.currentView?((0,a.uX)(),(0,a.Wv)(r,{key:0,title:"인기 영화","fetch-url":e.fetchURL},null,8,["fetch-url"])):(0,a.Q3)("",!0),"list"===e.currentView?((0,a.uX)(),(0,a.Wv)(u,{key:1,"api-key":e.apiKey,"genre-code":e.genreCode,"sorting-order":e.sortingOrder,"vote-average":e.voteAverage},null,8,["api-key","genre-code","sorting-order","vote-average"])):(0,a.Q3)("",!0)])}const ye={class:"movie-grid",ref:"gridContainer"},Ce={key:0,class:"loading-indicator"},Ke=["onClick"],Me=["src","alt"],_e={class:"movie-title"},Ee={key:0,class:"wishlist-indicator"},Ie={key:2,class:"pagination"},Re=["disabled"],We=["disabled"];function Pe(e,t,i,l,o,s){return(0,a.uX)(),(0,a.CE)("div",ye,[e.isLoading?((0,a.uX)(),(0,a.CE)("div",Ce,"Loading...")):((0,a.uX)(),(0,a.CE)("div",{key:1,class:(0,v.C4)(["grid-container",e.currentView])},[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(e.visibleMovieGroups,((t,i)=>((0,a.uX)(),(0,a.CE)("div",{key:i,class:(0,v.C4)(["movie-row",{full:t.length===e.rowSize}])},[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(t,(t=>((0,a.uX)(),(0,a.CE)("div",{key:t.id,class:"movie-card",onClick:i=>e.toggleWishlist(t)},[(0,a.Lk)("img",{src:e.getImageUrl(t.poster_path),alt:t.title||"No Title Available",loading:"lazy"},null,8,Me),(0,a.Lk)("div",_e,(0,v.v_)(t.title),1),e.isInWishlist(t.id)?((0,a.uX)(),(0,a.CE)("div",Ee,"👍")):(0,a.Q3)("",!0)],8,Ke)))),128))],2)))),128))],2)),e.totalPages>1?((0,a.uX)(),(0,a.CE)("div",Ie,[(0,a.Lk)("button",{onClick:t[0]||(t[0]=(...t)=>e.prevPage&&e.prevPage(...t)),disabled:1===e.currentPage},"< 이전",8,Re),(0,a.Lk)("span",null,(0,v.v_)(e.currentPage)+" / "+(0,v.v_)(e.totalPages),1),(0,a.Lk)("button",{onClick:t[1]||(t[1]=(...t)=>e.nextPage&&e.nextPage(...t)),disabled:e.currentPage===e.totalPages}," 다음 > ",8,We)])):(0,a.Q3)("",!0)],512)}i(8872);var Xe=(0,a.pM)({name:"MovieGrid",props:{fetchUrl:{type:String,required:!0}},setup(e){const t=(0,d.KR)([]),i=(0,d.KR)(!0),l=(0,d.KR)(1),o=(0,d.KR)(3),s=(0,d.KR)(20),n=async()=>{try{const i=await g.A.get(e.fetchUrl);t.value=i.data.results||[]}catch(i){console.error("Error fetching movies:",i),t.value=[]}},r=(0,a.EW)((()=>{if(!t.value||0===t.value.length)return[];const e=(l.value-1)*s.value,i=e+s.value,a=t.value.slice(e,i);return a.reduce(((e,t,i)=>{const l=Math.floor(i/o.value);return e[l]||(e[l]=[]),e[l].push(t),e}),[])})),u=(0,a.EW)((()=>Math.ceil(t.value.length/s.value))),c=e=>`https://image.tmdb.org/t/p/w300${e}`,v=e=>{},p=e=>!1,h=()=>{l.value<u.value&&l.value++},k=()=>{l.value>1&&l.value--};return(0,a.sV)((async()=>{await n(),i.value=!1})),{movies:t,isLoading:i,currentPage:l,rowSize:o,moviesPerPage:s,getImageUrl:c,visibleMovieGroups:r,totalPages:u,nextPage:h,prevPage:k,toggleWishlist:v,isInWishlist:p}}});const Ae=(0,n.A)(Xe,[["render",Pe],["__scopeId","data-v-fea8ef92"]]);var Se=Ae;const Fe={class:"movie-grid",ref:"gridContainer"},Ue=["onMouseup"],Te=["src","alt"],$e={class:"movie-title"},Ve={ref:"loadingTrigger",class:"loading-trigger"},Oe={key:0,class:"loading-indicator"};function xe(e,t,i,l,o,s){return(0,a.uX)(),(0,a.CE)("div",Fe,[(0,a.Lk)("div",{class:(0,v.C4)(["grid-container",{list:"list"===l.currentView}])},[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(l.visibleMovieGroups,((e,t)=>((0,a.uX)(),(0,a.CE)("div",{key:t,class:(0,v.C4)(["movie-row",{full:e.length===l.rowSize}])},[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(e,(e=>((0,a.uX)(),(0,a.CE)("div",{key:e.id,class:"movie-card",onMouseup:t=>l.toggleWishlist(e)},[(0,a.Lk)("img",{src:l.getImageUrl(e.poster_path),alt:e.title||"No Title Available",loading:"lazy"},null,8,Te),(0,a.Lk)("div",$e,(0,v.v_)(e.title),1)],40,Ue)))),128))],2)))),128))],2),(0,a.Lk)("div",Ve,[l.isLoading?((0,a.uX)(),(0,a.CE)("div",Oe,t[1]||(t[1]=[(0,a.Lk)("div",{class:"spinner"},null,-1),(0,a.Lk)("span",null,"Loading...",-1)]))):(0,a.Q3)("",!0)],512),l.showTopButton?((0,a.uX)(),(0,a.CE)("button",{key:0,onClick:t[0]||(t[0]=(...e)=>l.scrollToTopAndReset&&l.scrollToTopAndReset(...e)),class:"top-button","aria-label":"맨 위로 이동"}," Top ")):(0,a.Q3)("",!0)],512)}var je={name:"MovieInfiniteScroll",props:{apiKey:{type:String,required:!0},genreCode:{type:String,default:"0"},sortingOrder:{type:String,default:"all"},voteAverage:{type:Number,default:-1}},setup(e){const t=(0,d.KR)([]),i=(0,d.KR)(1),l=(0,d.KR)(4),o=(0,d.KR)(!1),s=(0,d.KR)(!0),n=(0,d.KR)("grid"),r=(0,d.KR)(!1),u=(0,d.KR)(null),c=(0,d.KR)([]);let v;const p=async()=>{if(!o.value&&s.value){o.value=!0;try{const l="0"===e.genreCode?"https://api.themoviedb.org/3/movie/popular":"https://api.themoviedb.org/3/discover/movie",a={api_key:e.apiKey,language:"ko-KR",page:i.value};"0"!==e.genreCode&&(a.with_genres=e.genreCode),e.voteAverage>0&&(a["vote_average.gte"]=e.voteAverage,a["vote_average.lte"]=e.voteAverage+1),"all"!==e.sortingOrder&&(a.with_original_language=e.sortingOrder);const o=await g.A.get(l,{params:a}),n=o.data.results;n.length>0?(t.value=[...t.value,...n],i.value++):s.value=!1}catch(l){console.error("Error fetching movies:",l)}finally{o.value=!1}}},h=(0,a.EW)((()=>k(t.value,l.value))),k=(e,t)=>{const i=[];for(let l=0;l<e.length;l+=t)i.push(e.slice(l,l+t));return i},m=e=>e?`https://image.tmdb.org/t/p/w300${e}`:"/placeholder-image.jpg",b=e=>{c.value.includes(e.id)?c.value=c.value.filter((t=>t!==e.id)):c.value.push(e.id),console.log("Current Wishlist:",c.value)},f=e=>c.value.includes(e),w=()=>{const e=u.value;if(e){const t=e.scrollTop;r.value=t>300}},L=()=>{const e=u.value;e&&e.scrollTo({top:0,behavior:"smooth"}),t.value=[],i.value=1,s.value=!0,p()},y=()=>{v=new IntersectionObserver((e=>{e[0].isIntersecting&&s.value&&!o.value&&p()}),{root:u.value,rootMargin:"100px",threshold:.1}),u.value&&v.observe(u.value.querySelector(".loading-trigger"))};return(0,a.sV)((()=>{p(),y(),u.value&&u.value.addEventListener("scroll",w)})),(0,a.hi)((()=>{v&&v.disconnect(),u.value&&u.value.removeEventListener("scroll",w)})),{gridContainer:u,visibleMovieGroups:h,fetchMovies:p,getImageUrl:m,toggleWishlist:b,isInWishlist:f,scrollToTopAndReset:L,handleScroll:w,isLoading:o,showTopButton:r,rowSize:l,currentView:n}}};const Ge=(0,n.A)(je,[["render",xe],["__scopeId","data-v-16d97778"]]);var Be=Ge,He=(0,a.pM)({name:"Popular",components:{FontAwesomeIcon:$.gc,MovieGrid:Se,MovieInfiniteScroll:Be},setup(){const e=localStorage.getItem("TMDb-Key")||"",t=(0,d.KR)("grid"),i=(0,d.KR)("28"),l=(0,d.KR)("all"),o=(0,d.KR)(-1),s=(0,a.EW)((()=>de.getURL4PopularMovies(e))),n=e=>{t.value=e};return{faTh:T.UTC,faBars:T.ckx,apiKey:e,genreCode:i,sortingOrder:l,voteAverage:o,currentView:t,fetchURL:s,setView:n}}});const De=(0,n.A)(He,[["render",Le],["__scopeId","data-v-7bcd2f1e"]]);var Qe=De;const ze={class:"container-search"},Je={class:"container-search-bar"},Ne=["value"],qe=["value"],Ye=["value"],Ze={class:"content-search"},et={class:"movie-list"},tt=["onClick"],it=["src","alt"],lt={key:0,class:"loading-spinner"};function at(e,t,i,o,s,n){return(0,a.uX)(),(0,a.CE)("div",ze,[(0,a.Lk)("div",Je,[(0,a.bo)((0,a.Lk)("select",{"onUpdate:modelValue":t[0]||(t[0]=e=>o.selectedGenre=e),onChange:t[1]||(t[1]=(...e)=>o.updateMovies&&o.updateMovies(...e))},[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(o.genreCode,((e,t)=>((0,a.uX)(),(0,a.CE)("option",{key:e,value:e},(0,v.v_)(t),9,Ne)))),128))],544),[[l.u1,o.selectedGenre]]),(0,a.bo)((0,a.Lk)("select",{"onUpdate:modelValue":t[2]||(t[2]=e=>o.selectedSort=e),onChange:t[3]||(t[3]=(...e)=>o.updateMovies&&o.updateMovies(...e))},[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(o.sortingCode,((e,t)=>((0,a.uX)(),(0,a.CE)("option",{key:e,value:e},(0,v.v_)(t),9,qe)))),128))],544),[[l.u1,o.selectedSort]]),(0,a.bo)((0,a.Lk)("select",{"onUpdate:modelValue":t[4]||(t[4]=e=>o.selectedAge=e),onChange:t[5]||(t[5]=(...e)=>o.updateMovies&&o.updateMovies(...e))},[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(o.ageCode,((e,t)=>((0,a.uX)(),(0,a.CE)("option",{key:e,value:e},(0,v.v_)(t),9,Ye)))),128))],544),[[l.u1,o.selectedAge]]),(0,a.Lk)("button",{onClick:t[6]||(t[6]=(...e)=>o.resetFilters&&o.resetFilters(...e)),class:"reset-button"},"초기화")]),(0,a.Lk)("div",Ze,[(0,a.Lk)("h2",null,(0,v.v_)(o.selectedGenreName)+" 영화",1),(0,a.Lk)("div",et,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(o.movies,(e=>((0,a.uX)(),(0,a.CE)("div",{key:e.id,class:"movie-card",onClick:t=>o.toggleWishlist(e)},[e.poster_path?((0,a.uX)(),(0,a.CE)("img",{key:0,src:`https://image.tmdb.org/t/p/w500${e.poster_path}`,alt:e.title},null,8,it)):(0,a.Q3)("",!0),(0,a.Lk)("p",null,(0,v.v_)(e.title),1),(0,a.Lk)("span",{class:(0,v.C4)(["wishlist-indicator",{active:o.isInWishlist(e.id)}])}," ♥ ",2)],8,tt)))),128)),o.isLoading?((0,a.uX)(),(0,a.CE)("div",lt,"로딩 중...")):(0,a.Q3)("",!0)])])])}var ot={name:"Search",setup(){const e=(0,d.KR)(localStorage.getItem("TMDb-Key")||""),t=(0,d.KR)(0),i=(0,d.KR)("all"),l=(0,d.KR)(-1),o=(0,d.KR)([]),s=(0,d.KR)(1),n=(0,d.KR)(1),r=(0,d.KR)(!1),u={"장르 (전체)":0,"액 션":28,"판타지, 모험":12,"코 미디":35,"공 포":80,"가 족":10751},c={"언 어":"all",En:"en",Ko:"ko"},v={"평 점":-1,"9~10":9,"8~9":8,"7~8":7,"6~7":6,"5~6":5,"4~5":4,"4점 이하":-2},g=(0,a.EW)((()=>Object.keys(u).find((e=>u[e]===parseInt(t.value)))||"전체")),p=async(a=1)=>{if(r.value||a>n.value)return;r.value=!0;const u=0!==t.value?`&with_genres=${t.value}`:"",c="all"!==i.value?`&with_original_language=${i.value}`:"",v=l.value>=0?`&vote_average.gte=${l.value}`:"",d=`https://api.themoviedb.org/3/discover/movie?api_key=${e.value}&language=ko-KR&page=${a}${u}${c}${v}`;try{const e=await fetch(d),t=await e.json();o.value=[...o.value,...t.results],n.value=t.total_pages,s.value=a}catch(g){console.error("Failed to fetch movies:",g)}finally{r.value=!1}},h=()=>{p(s.value+1)},k=()=>{const e=document.documentElement.scrollHeight-window.innerHeight,t=window.scrollY;t>=e-200&&h()},m=()=>{t.value=0,i.value="all",l.value=-1,o.value=[],s.value=1,p(1)},b=()=>{o.value=[],s.value=1,p(1)},f=e=>{he.toggleWishlist(e)},w=e=>he.isInWishlist(e);return(0,a.sV)((()=>{p(),window.addEventListener("scroll",k)})),(0,a.hi)((()=>{window.removeEventListener("scroll",k)})),{selectedGenre:t,selectedSort:i,selectedAge:l,selectedGenreName:g,movies:o,genreCode:u,sortingCode:c,ageCode:v,resetFilters:m,updateMovies:b,toggleWishlist:f,isInWishlist:w,isLoading:r}}};const st=(0,n.A)(ot,[["render",at],["__scopeId","data-v-6ca6597c"]]);var nt=st;function rt(e,t,i,l,o,s){const n=(0,a.g2)("MovieWishlist");return(0,a.uX)(),(0,a.Wv)(n)}const ut={class:"movie-grid",ref:"gridContainer"},ct=["onClick"],vt=["src","alt"],dt={class:"movie-title"},gt={key:0,class:"empty-wishlist"},pt={key:1,class:"pagination"},ht=["disabled"],kt=["disabled"];function mt(e,t,i,l,o,s){return(0,a.uX)(),(0,a.CE)("div",ut,[(0,a.Lk)("div",{class:(0,v.C4)(["grid-container",l.currentView])},[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(l.visibleWishlistMovies,((e,t)=>((0,a.uX)(),(0,a.CE)("div",{key:t,class:(0,v.C4)(["movie-row",{full:e.length===l.rowSize}])},[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(e,(e=>((0,a.uX)(),(0,a.CE)("div",{key:e.id,class:"movie-card",onClick:t=>l.toggleWishlist(e)},[(0,a.Lk)("img",{src:l.getImageUrl(e.poster_path),alt:e.title},null,8,vt),(0,a.Lk)("div",dt,(0,v.v_)(e.title),1),(0,a.Lk)("div",{class:(0,v.C4)(["wishlist-indicator",{active:l.isMovieInWishlist(e.id)}])}," ♥ ",2)],8,ct)))),128))],2)))),128))],2),0===l.wishlistMovies.length?((0,a.uX)(),(0,a.CE)("div",gt," 위시리스트가 비어 있습니다. ")):(0,a.Q3)("",!0),l.totalPages>1?((0,a.uX)(),(0,a.CE)("div",pt,[(0,a.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>l.prevPage&&l.prevPage(...e)),disabled:1===l.currentPage},"< 이전",8,ht),(0,a.Lk)("span",null,(0,v.v_)(l.currentPage)+" / "+(0,v.v_)(l.totalPages),1),(0,a.Lk)("button",{onClick:t[1]||(t[1]=(...e)=>l.nextPage&&l.nextPage(...e)),disabled:l.currentPage===l.totalPages}," 다음 > ",8,kt)])):(0,a.Q3)("",!0)],512)}var bt={name:"MovieWishlist",setup(){const e=(0,d.KR)(null),t=(0,d.KR)([]),i=(0,d.KR)([]),l=(0,d.KR)("grid"),o=(0,d.KR)(1),s=(0,d.KR)(4),n=(0,d.KR)(20),r=(0,d.KR)(window.innerWidth<=768),u=he,c=()=>{t.value=u.getCurrentWishlist(),p()},v=e=>e?`https://image.tmdb.org/t/p/w300${e}`:"/placeholder-image.jpg",g=()=>{if(!e.value)return;const t=e.value,i=t.offsetWidth,l=window.innerHeight-t.offsetTop,a=r.value?90:220,o=r.value?150:330,u=r.value?10:15,c=-10;s.value=Math.floor(i/(a+u));const v=Math.floor(l/(o+c));n.value=s.value*v,p()},p=()=>{const e=(o.value-1)*n.value,l=e+n.value,a=t.value.slice(e,l);i.value=a.reduce(((e,t,i)=>{const l=Math.floor(i/s.value);return e[l]||(e[l]=[]),e[l].push(t),e}),[])},h=(0,a.EW)((()=>Math.ceil(t.value.length/n.value))),k=()=>{o.value<h.value&&(o.value++,p())},m=()=>{o.value>1&&(o.value--,p())},b=e=>{u.toggleWishlist(e),c()},f=e=>u.isInWishlist(e),w=()=>{r.value=window.innerWidth<=768,g()};return(0,a.sV)((()=>{c(),g(),window.addEventListener("resize",w)})),(0,a.hi)((()=>{window.removeEventListener("resize",w)})),{gridContainer:e,wishlistMovies:t,visibleWishlistMovies:i,currentView:l,currentPage:o,rowSize:s,moviesPerPage:n,totalPages:h,isMobile:r,getImageUrl:v,nextPage:k,prevPage:m,toggleWishlist:b,isMovieInWishlist:f}}};const ft=(0,n.A)(bt,[["render",mt],["__scopeId","data-v-4aa6ffa2"]]);var wt=ft,Lt={name:"HomeWishlist",components:{MovieWishlist:wt}};const yt=(0,n.A)(Lt,[["render",rt]]);var Ct=yt;const Kt=(e,t,i)=>{const l=null!==localStorage.getItem("TMDb-Key");l?i():i("/signIn")},Mt=[{path:"/",component:B,beforeEnter:Kt,children:[{path:"",name:"HomeMain",component:be},{path:"wishlist",name:"HomeWish",component:Ct},{path:"popular",name:"HomePopular",component:Qe},{path:"/Search",component:nt}]},{path:"/signIn",name:"SignIn",component:M},{path:"/:catchAll(.*)",redirect:"/"}],_t=(0,c.aE)({history:(0,c.LA)(),routes:Mt});_t.beforeEach(((e,t,i)=>{const l=!!localStorage.getItem("authToken");e.meta.requiresAuth&&!l?i({path:"/signIn"}):i()}));var Et=_t,It=i(782),Rt=(0,It.y$)({state:{apiKey:""},mutations:{setApiKey(e,t){e.apiKey=t}},actions:{saveApiKey({commit:e},t){e("setApiKey",t)}}}),Wt=i(5847);const Pt=(0,l.Ef)(u);Pt.use(Wt.A,{preLoad:1.3,error:"/default-image.jpg",loading:"/loading-spinner.gif",attempt:1}),Pt.use(Rt).use(Et).mount("#app")}},t={};function i(l){var a=t[l];if(void 0!==a)return a.exports;var o=t[l]={exports:{}};return e[l].call(o.exports,o,o.exports,i),o.exports}i.m=e,function(){var e=[];i.O=function(t,l,a,o){if(!l){var s=1/0;for(c=0;c<e.length;c++){l=e[c][0],a=e[c][1],o=e[c][2];for(var n=!0,r=0;r<l.length;r++)(!1&o||s>=o)&&Object.keys(i.O).every((function(e){return i.O[e](l[r])}))?l.splice(r--,1):(n=!1,o<s&&(s=o));if(n){e.splice(c--,1);var u=a();void 0!==u&&(t=u)}}return t}o=o||0;for(var c=e.length;c>0&&e[c-1][2]>o;c--)e[c]=e[c-1];e[c]=[l,a,o]}}(),function(){i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,{a:t}),t}}(),function(){i.d=function(e,t){for(var l in t)i.o(t,l)&&!i.o(e,l)&&Object.defineProperty(e,l,{enumerable:!0,get:t[l]})}}(),function(){i.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={524:0};i.O.j=function(t){return 0===e[t]};var t=function(t,l){var a,o,s=l[0],n=l[1],r=l[2],u=0;if(s.some((function(t){return 0!==e[t]}))){for(a in n)i.o(n,a)&&(i.m[a]=n[a]);if(r)var c=r(i)}for(t&&t(l);u<s.length;u++)o=s[u],i.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return i.O(c)},l=self["webpackChunkmovie"]=self["webpackChunkmovie"]||[];l.forEach(t.bind(null,0)),l.push=t.bind(null,l.push.bind(l))}();var l=i.O(void 0,[504],(function(){return i(6412)}));l=i.O(l)})();
//# sourceMappingURL=app.65429a1b.js.map