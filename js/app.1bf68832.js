(function(){"use strict";var e={8582:function(e,t,o){var i=o(5130),a=o(6768);function l(e,t,o,i,l,n){const s=(0,a.g2)("router-view");return(0,a.uX)(),(0,a.Wv)(s)}var n={name:"App",mounted(){window.Kakao.isInitialized()||window.Kakao.init({NODE_ENV:"production",BASE_URL:"/"}.VUE_APP_KAKAO_API_KEY)}},s=o(1241);const r=(0,s.A)(n,[["render",l]]);var u=r,c=o(1387);const v={class:"login-container"};function d(e,t,o,i,l,n){return(0,a.uX)(),(0,a.CE)("div",v,[t[1]||(t[1]=(0,a.Lk)("h2",null,"로그인",-1)),(0,a.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>i.kakaoLogin&&i.kakaoLogin(...e)),class:"kakao-login-btn"},"카카오로 로그인")])}o(4114);var g=o(144),k={setup(){const e=(0,g.KR)(!1),t=(0,g.KR)(""),o=(0,c.rd)(),i="27d7fae4bb996ac3f5874f779a8f0df8",l=()=>{window.Kakao.isInitialized()||window.Kakao.init(i),window.Kakao.Auth.login({success:e=>{localStorage.setItem("kakao_token",e.access_token),n()},fail:e=>{console.error("카카오 로그인 실패:",e)}})},n=()=>{window.Kakao.isInitialized()||window.Kakao.init(i),window.Kakao.API.request({url:"/v2/user/me",success:o=>{t.value=o.kakao_account.profile.nickname,e.value=!0},fail:e=>{console.error("사용자 정보 요청 실패:",e)}})},s=()=>{window.Kakao.isInitialized()||window.Kakao.init(i),window.Kakao.Auth.getAccessToken()?window.Kakao.Auth.logout((()=>{localStorage.removeItem("kakao_token"),e.value=!1,t.value="",o.push("/")})):(localStorage.removeItem("kakao_token"),e.value=!1,t.value="",o.push("/"))},r=()=>{const o=localStorage.getItem("kakao_token");o&&(localStorage.removeItem("kakao_token"),e.value=!1,t.value="")};return(0,a.sV)((()=>{r()})),{isLoggedIn:e,userNickname:t,kakaoLogin:l,logout:s}}};const p=(0,s.A)(k,[["render",d],["__scopeId","data-v-2e64cfe7"]]);var h=p;const m={id:"app"},f={id:"container"};function w(e,t,o,i,l,n){const s=(0,a.g2)("Header"),r=(0,a.g2)("router-view");return(0,a.uX)(),(0,a.CE)("div",m,[(0,a.bF)(s),(0,a.Lk)("div",f,[(0,a.bF)(r)])])}var b=o(4232);const C={id:"container"},_={class:"header-left"},L={class:"logo"},I={class:"nav-links desktop-nav"},K={class:"header-right"},y={key:0,class:"user-menu"},E={key:1,class:"user-info-menu"},M={class:"user-profile"},R=["src"],W={key:0,class:"user-nickname-display"},X={key:2,class:"user-info"},P=["src"],S={class:"profile_nickname"};function A(e,t,o,i,l,n){const s=(0,a.g2)("font-awesome-icon"),r=(0,a.g2)("router-link");return(0,a.uX)(),(0,a.CE)("div",C,[(0,a.Lk)("header",{class:(0,b.C4)(["app-header",{scrolled:i.isScrolled}])},[(0,a.Lk)("div",_,[(0,a.Lk)("div",L,[(0,a.bF)(r,{to:"/"},{default:(0,a.k6)((()=>[(0,a.bF)(s,{icon:"cube",style:{color:"rgba(242, 0, 255, 0.8)"}})])),_:1})]),(0,a.Lk)("nav",I,[(0,a.Lk)("ul",null,[(0,a.Lk)("li",null,[(0,a.bF)(r,{to:"/"},{default:(0,a.k6)((()=>t[5]||(t[5]=[(0,a.eW)("홈")]))),_:1})]),(0,a.Lk)("li",null,[(0,a.bF)(r,{to:"/popular"},{default:(0,a.k6)((()=>t[6]||(t[6]=[(0,a.eW)("요즘 핫한")]))),_:1})]),(0,a.Lk)("li",null,[(0,a.bF)(r,{to:"/wishlist"},{default:(0,a.k6)((()=>t[7]||(t[7]=[(0,a.eW)("위시 리스트")]))),_:1})]),(0,a.Lk)("li",null,[(0,a.bF)(r,{to:"/search"},{default:(0,a.k6)((()=>t[8]||(t[8]=[(0,a.eW)("카테고리")]))),_:1})])])])]),(0,a.Lk)("div",K,[i.showUserMenu?((0,a.uX)(),(0,a.CE)("div",y,[i.isLoggedIn?((0,a.uX)(),(0,a.CE)("div",E,[(0,a.Lk)("div",M,[i.userProfileImage?((0,a.uX)(),(0,a.CE)("img",{key:0,src:i.userProfileImage,alt:"프로필 이미지",class:"profile-image"},null,8,R)):(0,a.Q3)("",!0)]),(0,a.Lk)("button",{class:"logout-button",onClick:t[1]||(t[1]=(...e)=>i.logout&&i.logout(...e))},"로그아웃"),i.userNickname?((0,a.uX)(),(0,a.CE)("div",W,[(0,a.Lk)("span",null,"안녕하세요, "+(0,b.v_)(i.userNickname)+"님!",1)])):(0,a.Q3)("",!0)])):((0,a.uX)(),(0,a.CE)("button",{key:0,class:"login-button",onClick:t[0]||(t[0]=(...e)=>i.kakaoLogin&&i.kakaoLogin(...e))}," 카카오로 로그인 "))])):(0,a.Q3)("",!0),i.isLoggedIn?((0,a.uX)(),(0,a.CE)("div",X,[i.userProfileImage?((0,a.uX)(),(0,a.CE)("img",{key:0,src:i.userProfileImage,alt:"프로필 이미지",class:"profile-image-small"},null,8,P)):(0,a.Q3)("",!0),(0,a.Lk)("span",S,(0,b.v_)(i.userNickname),1),(0,a.Lk)("button",{class:"icon-button",onClick:t[3]||(t[3]=(...e)=>i.toggleUserMenu&&i.toggleUserMenu(...e))},[(0,a.bF)(s,{icon:"user"})])])):((0,a.uX)(),(0,a.CE)("button",{key:1,class:"icon-button",onClick:t[2]||(t[2]=(...e)=>i.toggleUserMenu&&i.toggleUserMenu(...e))},[(0,a.bF)(s,{icon:"user"})]))])],2),(0,a.Lk)("div",{class:(0,b.C4)(["mobile-nav",{open:i.isMobileMenuOpen}])},[(0,a.Lk)("button",{class:"close-button",onClick:t[4]||(t[4]=(...e)=>i.toggleMobileMenu&&i.toggleMobileMenu(...e))},[(0,a.bF)(s,{icon:"times"})]),(0,a.Lk)("nav",null,[(0,a.Lk)("ul",null,[(0,a.Lk)("li",null,[(0,a.bF)(r,{to:"/",onClick:i.toggleMobileMenu},{default:(0,a.k6)((()=>t[9]||(t[9]=[(0,a.eW)("홈")]))),_:1},8,["onClick"])]),(0,a.Lk)("li",null,[(0,a.bF)(r,{to:"/popular",onClick:i.toggleMobileMenu},{default:(0,a.k6)((()=>t[10]||(t[10]=[(0,a.eW)("요즘 핫한")]))),_:1},8,["onClick"])]),(0,a.Lk)("li",null,[(0,a.bF)(r,{to:"/wishlist",onClick:i.toggleMobileMenu},{default:(0,a.k6)((()=>t[11]||(t[11]=[(0,a.eW)("위시 리스트")]))),_:1},8,["onClick"])]),(0,a.Lk)("li",null,[(0,a.bF)(r,{to:"/search",onClick:i.toggleMobileMenu},{default:(0,a.k6)((()=>t[12]||(t[12]=[(0,a.eW)("카테고리")]))),_:1},8,["onClick"])])])])],2)])}o(4603),o(7566),o(8721);var F=o(8950),$=o(2353),T=o(292);F.Yv.add($.MjD,$.X46,$.br3,$.ycA,$.ckx,$.GRI);var U={name:"AppHeader",components:{FontAwesomeIcon:T.gc},setup(){const e=(0,g.KR)(!1),t=(0,g.KR)(!1),o=(0,g.KR)(!1),i=(0,g.KR)(!1),l=(0,g.KR)(""),n=(0,g.KR)(""),s=(0,g.KR)(""),r=(0,c.rd)(),u="27d7fae4bb996ac3f5874f779a8f0df8",v="https://jymovie.netlify.app/",d=()=>{e.value=window.scrollY>50},k=()=>{t.value=!t.value},p=()=>{o.value=!o.value},h=()=>{window.Kakao.isInitialized()||window.Kakao.init(u);const e=`https://kauth.kakao.com/oauth/authorize?client_id=${u}&redirect_uri=${v}&response_type=code&scope=profile_nickname,profile_image,account_email&prompt=login`;window.location.href=e},m=async()=>{const e=new URLSearchParams(window.location.search),t=e.get("code");if(t)try{const e=await fetch(`https://kauth.kakao.com/oauth/token?grant_type=authorization_code&client_id=${u}&redirect_uri=${v}&code=${t}`,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"}}),o=await e.json();o.access_token&&(localStorage.setItem("kakao_token",o.access_token),i.value=!0,f())}catch(o){console.error("토큰 요청 실패:",o)}},f=()=>{window.Kakao.isInitialized()||window.Kakao.init(u),window.Kakao.API.request({url:"/v2/user/me",success:e=>{const t={id:e.id,nickname:e.kakao_account.profile.nickname,profileImage:e.kakao_account.profile.profile_image_url,email:e.kakao_account.email};localStorage.setItem("userInfo",JSON.stringify(t)),l.value=t.nickname,s.value=t.profileImage,n.value=t.email,i.value=!0},fail:e=>{console.error("사용자 정보 요청 실패:",e)}})},w=()=>{window.Kakao.isInitialized()||window.Kakao.init(u),window.Kakao.Auth.getAccessToken()?window.Kakao.Auth.logout((()=>{localStorage.removeItem("kakao_token"),localStorage.removeItem("userInfo"),i.value=!1,l.value="",n.value="",s.value="",r.push("/")})):(localStorage.removeItem("kakao_token"),localStorage.removeItem("userInfo"),i.value=!1,l.value="",n.value="",s.value="",r.push("/"))},b=()=>{const e=localStorage.getItem("kakao_token");if(e){i.value=!0;const e=JSON.parse(localStorage.getItem("userInfo"));e?(l.value=e.nickname,n.value=e.email,s.value=e.profileImage):f()}else i.value=!1,l.value="",n.value="",s.value=""};return(0,a.sV)((()=>{window.addEventListener("scroll",d),m(),b()})),(0,a.hi)((()=>{window.removeEventListener("scroll",d)})),{isScrolled:e,isMobileMenuOpen:t,showUserMenu:o,isLoggedIn:i,userNickname:l,userEmail:n,userProfileImage:s,toggleMobileMenu:k,toggleUserMenu:p,kakaoLogin:h,logout:w}}};const O=(0,s.A)(U,[["render",A],["__scopeId","data-v-1fc8e2a1"]]);var V=O,j=(0,a.pM)({name:"Home",components:{Header:V}});const z=(0,s.A)(j,[["render",w],["__scopeId","data-v-a10561e8"]]);var N=z;const x={class:"home"},G={class:"movie-section"},Q={class:"movie-row"},H=["onClick"],B=["src","alt"],Y={class:"movie-section"},q={class:"movie-row"},J=["onClick"],D=["src","alt"],Z={class:"movie-section"},ee={class:"movie-row"},te=["onClick"],oe=["src","alt"];function ie(e,t,o,i,l,n){const s=(0,a.g2)("Banner");return(0,a.uX)(),(0,a.CE)("div",x,[(0,a.bF)(s,{movie:i.featuredMovie},null,8,["movie"]),(0,a.Lk)("section",G,[t[0]||(t[0]=(0,a.Lk)("h2",null,"인기영화",-1)),(0,a.Lk)("div",Q,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(i.popularMovies,(e=>((0,a.uX)(),(0,a.CE)("div",{key:e.id,class:"movie-card",onClick:t=>i.handleWishlistClick(e)},[(0,a.Lk)("img",{src:`https://image.tmdb.org/t/p/w500${e.poster_path}`,alt:e.title},null,8,B),(0,a.Lk)("p",null,(0,b.v_)(e.title),1),(0,a.Lk)("span",{class:(0,b.C4)(["wishlist-indicator",{active:i.isInWishlist(e.id)}])}," ♥ ",2)],8,H)))),128))])]),(0,a.Lk)("section",Y,[t[1]||(t[1]=(0,a.Lk)("h2",null,"신작",-1)),(0,a.Lk)("div",q,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(i.newReleases,(e=>((0,a.uX)(),(0,a.CE)("div",{key:e.id,class:"movie-card",onClick:t=>i.handleWishlistClick(e)},[(0,a.Lk)("img",{src:`https://image.tmdb.org/t/p/w500${e.poster_path}`,alt:e.title},null,8,D),(0,a.Lk)("p",null,(0,b.v_)(e.title),1),(0,a.Lk)("span",{class:(0,b.C4)(["wishlist-indicator",{active:i.isInWishlist(e.id)}])}," ♥ ",2)],8,J)))),128))])]),(0,a.Lk)("section",Z,[t[2]||(t[2]=(0,a.Lk)("h2",null,"액션영화",-1)),(0,a.Lk)("div",ee,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(i.actionMovies,(e=>((0,a.uX)(),(0,a.CE)("div",{key:e.id,class:"movie-card",onClick:t=>i.handleWishlistClick(e)},[(0,a.Lk)("img",{src:`https://image.tmdb.org/t/p/w500${e.poster_path}`,alt:e.title},null,8,oe),(0,a.Lk)("p",null,(0,b.v_)(e.title),1),(0,a.Lk)("span",{class:(0,b.C4)(["wishlist-indicator",{active:i.isInWishlist(e.id)}])}," ♥ ",2)],8,te)))),128))])])])}const ae={class:"banner-content"},le={key:1};function ne(e,t,o,i,l,n){return o.movie?((0,a.uX)(),(0,a.CE)("div",{key:0,class:"banner",style:(0,b.Tr)({backgroundImage:`url(${n.backdropUrl})`})},[(0,a.Lk)("div",ae,[(0,a.Lk)("h1",null,(0,b.v_)(o.movie.title),1),(0,a.Lk)("p",null,(0,b.v_)(o.movie.overview),1),t[0]||(t[0]=(0,a.Lk)("button",{class:"play-btn title-btn"},"재생",-1)),t[1]||(t[1]=(0,a.Lk)("button",{class:"info-btn title-btn"},"상세 정보",-1))])],4)):((0,a.uX)(),(0,a.CE)("div",le,t[2]||(t[2]=[(0,a.Lk)("p",null,"Loading banner...",-1)])))}var se={name:"Banner",props:{movie:{type:Object,required:!1,default:()=>null}},computed:{backdropUrl(){return this.movie?.backdrop_path?`https://image.tmdb.org/t/p/original${this.movie.backdrop_path}`:""}}};const re=(0,s.A)(se,[["render",ne],["__scopeId","data-v-1ffdcab2"]]);var ue=re,ce=o(1114),ve=o(4373);class de{constructor(){(0,ce.A)(this,"API_KEY","fb2191b2c2e7923b7b79f8e3fa925043")}async fetchFeaturedMovie(){try{const e=await ve.A.get(`https://api.themoviedb.org/3/movie/popular?api_key=${this.API_KEY}&language=ko-KR`);return e.data.results[0]}catch(e){throw console.error("Error fetching featured movie:",e),e}}getURL4PopularMovies(e=1){return`https://api.themoviedb.org/3/movie/popular?api_key=${this.API_KEY}&language=ko-KR&page=${e}`}getURL4ReleaseMovies(e=2){return`https://api.themoviedb.org/3/movie/now_playing?api_key=${this.API_KEY}&language=ko-KR&page=${e}`}getURL4GenreMovies(e,t=1){return`https://api.themoviedb.org/3/discover/movie?api_key=${this.API_KEY}&with_genres=${e}&language=ko-KR&page=${t}`}}const ge=new de;o(8992),o(4520),o(7550);class ke{constructor(){(0,ce.A)(this,"wishlist",void 0),this.wishlist=(0,g.KR)(this.loadWishlist())}loadWishlist(){const e=localStorage.getItem("Kakao-Token");if(!e)return console.warn("로그인이 필요합니다."),[];const t=localStorage.getItem(`movieWishlist_${e}`);return t?JSON.parse(t):[]}saveWishlist(){const e=localStorage.getItem("Kakao-Token");e?localStorage.setItem(`movieWishlist_${e}`,JSON.stringify(this.wishlist.value)):console.warn("로그인이 필요합니다. 위시리스트를 저장할 수 없습니다.")}toggleWishlist(e){const t=this.wishlist.value.findIndex((t=>t.id===e.id));-1===t?this.wishlist.value.push({id:e.id,title:e.title,poster_path:e.poster_path||""}):this.wishlist.value=this.wishlist.value.filter((t=>t.id!==e.id)),this.saveWishlist()}isInWishlist(e){return this.wishlist.value.some((t=>t.id===e))}getCurrentWishlist(){return this.wishlist.value}get wishlist$(){return(0,a.EW)((()=>this.wishlist.value))}}const pe=new ke;var he={name:"HomeMain",components:{Banner:ue},setup(){const e=(0,g.KR)({title:"",overview:"",backdrop_path:""}),t=(0,g.KR)([]),o=(0,g.KR)([]),i=(0,g.KR)([]),l=async()=>{try{const a=await fetch(ge.getURL4PopularMovies());t.value=(await a.json()).results;const l=await fetch(ge.getURL4ReleaseMovies());o.value=(await l.json()).results;const n=await fetch(ge.getURL4GenreMovies("28"));if(i.value=(await n.json()).results,t.value.length>=5){const o=t.value[4];e.value={title:o.title,overview:o.overview,backdrop_path:o.backdrop_path}}}catch(a){console.error("Failed to load movies:",a)}},n=e=>{const t=localStorage.getItem("kakao_token");t?pe.toggleWishlist(e):alert("위시리스트를 사용하려면 로그인이 필요합니다.")},s=e=>pe.isInWishlist(e);return(0,a.sV)((()=>{l()})),{featuredMovie:e,popularMovies:t,newReleases:o,actionMovies:i,handleWishlistClick:n,isInWishlist:s}}};const me=(0,s.A)(he,[["render",ie],["__scopeId","data-v-784b2fc8"]]);var fe=me;const we={class:"popular-container"},be={class:"view-toggle"};function Ce(e,t,o,i,l,n){const s=(0,a.g2)("font-awesome-icon"),r=(0,a.g2)("MovieGrid"),u=(0,a.g2)("MovieInfiniteScroll");return(0,a.uX)(),(0,a.CE)("div",we,[(0,a.Lk)("div",be,[(0,a.Lk)("button",{onClick:t[0]||(t[0]=t=>e.setView("grid")),class:(0,b.C4)({active:"grid"===e.currentView})},[(0,a.bF)(s,{icon:e.faTh},null,8,["icon"])],2),(0,a.Lk)("button",{onClick:t[1]||(t[1]=t=>e.setView("list")),class:(0,b.C4)({active:"list"===e.currentView})},[(0,a.bF)(s,{icon:e.faBars},null,8,["icon"])],2)]),"grid"===e.currentView?((0,a.uX)(),(0,a.Wv)(r,{key:0,title:"인기 영화","fetch-url":e.fetchURL},null,8,["fetch-url"])):(0,a.Q3)("",!0),"list"===e.currentView?((0,a.uX)(),(0,a.Wv)(u,{key:1,"api-key":e.apiKey,"genre-code":e.genreCode,"sorting-order":e.sortingOrder,"vote-average":e.voteAverage},null,8,["api-key","genre-code","sorting-order","vote-average"])):(0,a.Q3)("",!0)])}const _e={class:"movie-grid",ref:"gridContainer"},Le={key:0,class:"loading-indicator"},Ie=["onClick"],Ke=["src","alt"],ye={class:"movie-title"},Ee={key:0,class:"wishlist-indicator"},Me={key:2,class:"pagination"},Re=["disabled"],We=["disabled"];function Xe(e,t,o,i,l,n){return(0,a.uX)(),(0,a.CE)("div",_e,[e.isLoading?((0,a.uX)(),(0,a.CE)("div",Le,"Loading...")):((0,a.uX)(),(0,a.CE)("div",{key:1,class:(0,b.C4)(["grid-container",e.currentView])},[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(e.visibleMovieGroups,((t,o)=>((0,a.uX)(),(0,a.CE)("div",{key:o,class:(0,b.C4)(["movie-row",{full:t.length===e.rowSize}])},[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(t,(t=>((0,a.uX)(),(0,a.CE)("div",{key:t.id,class:"movie-card",onClick:o=>e.toggleWishlist(t)},[(0,a.Lk)("img",{src:e.getImageUrl(t.poster_path),alt:t.title||"No Title Available",loading:"lazy"},null,8,Ke),(0,a.Lk)("div",ye,(0,b.v_)(t.title),1),e.isInWishlist(t.id)?((0,a.uX)(),(0,a.CE)("div",Ee,"👍")):(0,a.Q3)("",!0)],8,Ie)))),128))],2)))),128))],2)),e.totalPages>1?((0,a.uX)(),(0,a.CE)("div",Me,[(0,a.Lk)("button",{onClick:t[0]||(t[0]=(...t)=>e.prevPage&&e.prevPage(...t)),disabled:1===e.currentPage},"< 이전",8,Re),(0,a.Lk)("span",null,(0,b.v_)(e.currentPage)+" / "+(0,b.v_)(e.totalPages),1),(0,a.Lk)("button",{onClick:t[1]||(t[1]=(...t)=>e.nextPage&&e.nextPage(...t)),disabled:e.currentPage===e.totalPages}," 다음 > ",8,We)])):(0,a.Q3)("",!0)],512)}o(8872);var Pe=(0,a.pM)({name:"MovieGrid",props:{fetchUrl:{type:String,required:!0}},setup(e){const t=(0,g.KR)([]),o=(0,g.KR)(!0),i=(0,g.KR)(1),l=(0,g.KR)(3),n=(0,g.KR)(20),s=async()=>{try{const o=await ve.A.get(e.fetchUrl);t.value=o.data.results||[]}catch(o){console.error("Error fetching movies:",o),t.value=[]}},r=(0,a.EW)((()=>{if(!t.value||0===t.value.length)return[];const e=(i.value-1)*n.value,o=e+n.value,a=t.value.slice(e,o);return a.reduce(((e,t,o)=>{const i=Math.floor(o/l.value);return e[i]||(e[i]=[]),e[i].push(t),e}),[])})),u=(0,a.EW)((()=>Math.ceil(t.value.length/n.value))),c=e=>`https://image.tmdb.org/t/p/w300${e}`,v=e=>{},d=e=>!1,k=()=>{i.value<u.value&&i.value++},p=()=>{i.value>1&&i.value--};return(0,a.sV)((async()=>{await s(),o.value=!1})),{movies:t,isLoading:o,currentPage:i,rowSize:l,moviesPerPage:n,getImageUrl:c,visibleMovieGroups:r,totalPages:u,nextPage:k,prevPage:p,toggleWishlist:v,isInWishlist:d}}});const Se=(0,s.A)(Pe,[["render",Xe],["__scopeId","data-v-fea8ef92"]]);var Ae=Se;const Fe={class:"movie-grid",ref:"gridContainer"},$e=["onMouseup"],Te=["src","alt"],Ue={class:"movie-title"},Oe={ref:"loadingTrigger",class:"loading-trigger"},Ve={key:0,class:"loading-indicator"};function je(e,t,o,i,l,n){return(0,a.uX)(),(0,a.CE)("div",Fe,[(0,a.Lk)("div",{class:(0,b.C4)(["grid-container",{list:"list"===i.currentView}])},[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(i.visibleMovieGroups,((e,t)=>((0,a.uX)(),(0,a.CE)("div",{key:t,class:(0,b.C4)(["movie-row",{full:e.length===i.rowSize}])},[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(e,(e=>((0,a.uX)(),(0,a.CE)("div",{key:e.id,class:"movie-card",onMouseup:t=>i.toggleWishlist(e)},[(0,a.Lk)("img",{src:i.getImageUrl(e.poster_path),alt:e.title||"No Title Available",loading:"lazy"},null,8,Te),(0,a.Lk)("div",Ue,(0,b.v_)(e.title),1)],40,$e)))),128))],2)))),128))],2),(0,a.Lk)("div",Oe,[i.isLoading?((0,a.uX)(),(0,a.CE)("div",Ve,t[1]||(t[1]=[(0,a.Lk)("div",{class:"spinner"},null,-1),(0,a.Lk)("span",null,"Loading...",-1)]))):(0,a.Q3)("",!0)],512),i.showTopButton?((0,a.uX)(),(0,a.CE)("button",{key:0,onClick:t[0]||(t[0]=(...e)=>i.scrollToTopAndReset&&i.scrollToTopAndReset(...e)),class:"top-button","aria-label":"맨 위로 이동"}," Top ")):(0,a.Q3)("",!0)],512)}var ze={name:"MovieInfiniteScroll",props:{apiKey:{type:String,required:!0},genreCode:{type:String,default:"0"},sortingOrder:{type:String,default:"all"},voteAverage:{type:Number,default:-1}},setup(e){const t=(0,g.KR)([]),o=(0,g.KR)(1),i=(0,g.KR)(4),l=(0,g.KR)(!1),n=(0,g.KR)(!0),s=(0,g.KR)("grid"),r=(0,g.KR)(!1),u=(0,g.KR)(null),c=(0,g.KR)([]);let v;const d=async()=>{if(!l.value&&n.value){l.value=!0;try{const i="0"===e.genreCode?"https://api.themoviedb.org/3/movie/popular":"https://api.themoviedb.org/3/discover/movie",a={api_key:e.apiKey,language:"ko-KR",page:o.value};"0"!==e.genreCode&&(a.with_genres=e.genreCode),e.voteAverage>0&&(a["vote_average.gte"]=e.voteAverage,a["vote_average.lte"]=e.voteAverage+1),"all"!==e.sortingOrder&&(a.with_original_language=e.sortingOrder);const l=await ve.A.get(i,{params:a}),s=l.data.results;s.length>0?(t.value=[...t.value,...s],o.value++):n.value=!1}catch(i){console.error("Error fetching movies:",i)}finally{l.value=!1}}},k=(0,a.EW)((()=>p(t.value,i.value))),p=(e,t)=>{const o=[];for(let i=0;i<e.length;i+=t)o.push(e.slice(i,i+t));return o},h=e=>e?`https://image.tmdb.org/t/p/w300${e}`:"/placeholder-image.jpg",m=e=>{c.value.includes(e.id)?c.value=c.value.filter((t=>t!==e.id)):c.value.push(e.id),console.log("Current Wishlist:",c.value)},f=e=>c.value.includes(e),w=()=>{const e=u.value;if(e){const t=e.scrollTop;r.value=t>300}},b=()=>{const e=u.value;e&&e.scrollTo({top:0,behavior:"smooth"}),t.value=[],o.value=1,n.value=!0,d()},C=()=>{v=new IntersectionObserver((e=>{e[0].isIntersecting&&n.value&&!l.value&&d()}),{root:u.value,rootMargin:"100px",threshold:.1}),u.value&&v.observe(u.value.querySelector(".loading-trigger"))};return(0,a.sV)((()=>{d(),C(),u.value&&u.value.addEventListener("scroll",w)})),(0,a.hi)((()=>{v&&v.disconnect(),u.value&&u.value.removeEventListener("scroll",w)})),{gridContainer:u,visibleMovieGroups:k,fetchMovies:d,getImageUrl:h,toggleWishlist:m,isInWishlist:f,scrollToTopAndReset:b,handleScroll:w,isLoading:l,showTopButton:r,rowSize:i,currentView:s}}};const Ne=(0,s.A)(ze,[["render",je],["__scopeId","data-v-16d97778"]]);var xe=Ne,Ge=(0,a.pM)({name:"Popular",components:{FontAwesomeIcon:T.gc,MovieGrid:Ae,MovieInfiniteScroll:xe},setup(){const e="fb2191b2c2e7923b7b79f8e3fa925043",t=(0,g.KR)("grid"),o=(0,g.KR)("28"),i=(0,g.KR)("all"),l=(0,g.KR)(-1),n=(0,a.EW)((()=>`https://api.themoviedb.org/3/movie/popular?api_key=${e}&language=ko-KR&page=1`)),s=e=>{t.value=e};return{faTh:$.UTC,faBars:$.ckx,apiKey:e,genreCode:o,sortingOrder:i,voteAverage:l,currentView:t,fetchURL:n,setView:s}}});const Qe=(0,s.A)(Ge,[["render",Ce],["__scopeId","data-v-914595e8"]]);var He=Qe;const Be={class:"container-search"},Ye={class:"container-search-bar"},qe=["value"],Je=["value"],De=["value"],Ze={class:"content-search"},et={class:"movie-list"},tt=["onClick"],ot=["src","alt"],it={key:0,class:"loading-spinner"};function at(e,t,o,l,n,s){return(0,a.uX)(),(0,a.CE)("div",Be,[(0,a.Lk)("div",Ye,[(0,a.bo)((0,a.Lk)("select",{"onUpdate:modelValue":t[0]||(t[0]=e=>l.selectedGenre=e),onChange:t[1]||(t[1]=(...e)=>l.updateMovies&&l.updateMovies(...e))},[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(l.genreCode,((e,t)=>((0,a.uX)(),(0,a.CE)("option",{key:e,value:e},(0,b.v_)(t),9,qe)))),128))],544),[[i.u1,l.selectedGenre]]),(0,a.bo)((0,a.Lk)("select",{"onUpdate:modelValue":t[2]||(t[2]=e=>l.selectedSort=e),onChange:t[3]||(t[3]=(...e)=>l.updateMovies&&l.updateMovies(...e))},[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(l.sortingCode,((e,t)=>((0,a.uX)(),(0,a.CE)("option",{key:e,value:e},(0,b.v_)(t),9,Je)))),128))],544),[[i.u1,l.selectedSort]]),(0,a.bo)((0,a.Lk)("select",{"onUpdate:modelValue":t[4]||(t[4]=e=>l.selectedAge=e),onChange:t[5]||(t[5]=(...e)=>l.updateMovies&&l.updateMovies(...e))},[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(l.ageCode,((e,t)=>((0,a.uX)(),(0,a.CE)("option",{key:e,value:e},(0,b.v_)(t),9,De)))),128))],544),[[i.u1,l.selectedAge]]),(0,a.Lk)("button",{onClick:t[6]||(t[6]=(...e)=>l.resetFilters&&l.resetFilters(...e)),class:"reset-button"},"초기화")]),(0,a.Lk)("div",Ze,[(0,a.Lk)("h2",null,(0,b.v_)(l.selectedGenreName)+" 영화",1),(0,a.Lk)("div",et,[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(l.movies,(e=>((0,a.uX)(),(0,a.CE)("div",{key:e.id,class:"movie-card",onClick:t=>l.isLoggedIn?l.handleWishlistClick(e):null},[e.poster_path?((0,a.uX)(),(0,a.CE)("img",{key:0,src:`https://image.tmdb.org/t/p/w500${e.poster_path}`,alt:e.title},null,8,ot)):(0,a.Q3)("",!0),(0,a.Lk)("p",null,(0,b.v_)(e.title),1),l.isLoggedIn?((0,a.uX)(),(0,a.CE)("span",{key:1,class:(0,b.C4)(["wishlist-indicator",{active:l.isInWishlist(e.id)}])}," ♥ ",2)):(0,a.Q3)("",!0)],8,tt)))),128)),l.isLoading?((0,a.uX)(),(0,a.CE)("div",it,"로딩 중...")):(0,a.Q3)("",!0)])])])}o(2577);var lt={name:"Search",setup(){const e=(0,g.KR)("fb2191b2c2e7923b7b79f8e3fa925043"),t=(0,g.KR)(0),o=(0,g.KR)("all"),i=(0,g.KR)(-1),l=(0,g.KR)([]),n=(0,g.KR)(1),s=(0,g.KR)(1),r=(0,g.KR)(!1),u=(0,g.KR)(!!localStorage.getItem("kakao_token")),c={"장르 (전체)":0,"액 션":28,"판타지, 모험":12,"코 미디":35,"공 포":80,"가 족":10751},v={"언 어":"all",En:"en",Ko:"ko"},d={"평 점":-1,"9~10":9,"8~9":8,"7~8":7,"6~7":6,"5~6":5,"4~5":4,"4점 이하":-2},k=(0,a.EW)((()=>Object.keys(c).find((e=>c[e]===parseInt(t.value)))||"전체")),p=async(a=1)=>{if(r.value||a>s.value)return;r.value=!0;const u=0!==t.value?`&with_genres=${t.value}`:"",c="all"!==o.value?`&with_original_language=${o.value}`:"",v=i.value>=0?`&vote_average.gte=${i.value}`:"",d=`https://api.themoviedb.org/3/discover/movie?api_key=${e.value}&language=ko-KR&page=${a}${u}${c}${v}`;try{const e=await fetch(d),t=await e.json();l.value=[...l.value,...t.results],s.value=t.total_pages,n.value=a}catch(g){console.error("Failed to fetch movies:",g)}finally{r.value=!1}},h=()=>{p(n.value+1)},m=()=>{const e=document.documentElement.scrollHeight-window.innerHeight,t=window.scrollY;t>=e-200&&h()},f=()=>{t.value=0,o.value="all",i.value=-1,l.value=[],n.value=1,p(1)},w=()=>{l.value=[],n.value=1,p(1)},b=e=>{const t=localStorage.getItem("kakao_token");t?pe.toggleWishlist(e):alert("위시리스트를 사용하려면 로그인이 필요합니다.")},C=e=>u.value&&pe.isInWishlist(e);return(0,a.sV)((()=>{p(),window.addEventListener("scroll",m)})),(0,a.hi)((()=>{window.removeEventListener("scroll",m)})),{selectedGenre:t,selectedSort:o,selectedAge:i,selectedGenreName:k,movies:l,genreCode:c,sortingCode:v,ageCode:d,resetFilters:f,updateMovies:w,handleWishlistClick:b,isInWishlist:C,isLoading:r,isLoggedIn:u}}};const nt=(0,s.A)(lt,[["render",at],["__scopeId","data-v-5f533acb"]]);var st=nt;function rt(e,t,o,i,l,n){const s=(0,a.g2)("MovieWishlist");return(0,a.uX)(),(0,a.Wv)(s)}const ut={class:"movie-grid",ref:"gridContainer"},ct={key:0,class:"empty-wishlist"},vt={key:1},dt=["onClick"],gt=["src","alt"],kt={class:"movie-title"},pt={key:0,class:"empty-wishlist"},ht={key:1,class:"pagination"},mt=["disabled"],ft=["disabled"];function wt(e,t,o,i,l,n){return(0,a.uX)(),(0,a.CE)("div",ut,[i.isLoggedIn?((0,a.uX)(),(0,a.CE)("div",vt,[(0,a.Lk)("div",{class:(0,b.C4)(["grid-container",i.currentView])},[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(i.visibleWishlistMovies,((e,t)=>((0,a.uX)(),(0,a.CE)("div",{key:t,class:(0,b.C4)(["movie-row",{full:e.length===i.rowSize}])},[((0,a.uX)(!0),(0,a.CE)(a.FK,null,(0,a.pI)(e,(e=>((0,a.uX)(),(0,a.CE)("div",{key:e.id,class:"movie-card",onClick:t=>i.toggleWishlist(e)},[(0,a.Lk)("img",{src:i.getImageUrl(e.poster_path),alt:e.title},null,8,gt),(0,a.Lk)("div",kt,(0,b.v_)(e.title),1),(0,a.Lk)("div",{class:(0,b.C4)(["wishlist-indicator",{active:i.isMovieInWishlist(e.id)}])}," ♥ ",2)],8,dt)))),128))],2)))),128))],2),0===i.wishlistMovies.length?((0,a.uX)(),(0,a.CE)("div",pt," 위시리스트가 비어 있습니다. ")):(0,a.Q3)("",!0),i.totalPages>1?((0,a.uX)(),(0,a.CE)("div",ht,[(0,a.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>i.prevPage&&i.prevPage(...e)),disabled:1===i.currentPage}," < 이전 ",8,mt),(0,a.Lk)("span",null,(0,b.v_)(i.currentPage)+" / "+(0,b.v_)(i.totalPages),1),(0,a.Lk)("button",{onClick:t[1]||(t[1]=(...e)=>i.nextPage&&i.nextPage(...e)),disabled:i.currentPage===i.totalPages}," 다음 > ",8,ft)])):(0,a.Q3)("",!0)])):((0,a.uX)(),(0,a.CE)("div",ct," 로그인이 필요한 서비스입니다. "))],512)}var bt={name:"MovieWishlist",setup(){const e=(0,g.KR)(null),t=(0,g.KR)([]),o=(0,g.KR)([]),i=(0,g.KR)("grid"),l=(0,g.KR)(1),n=(0,g.KR)(4),s=(0,g.KR)(20),r=(0,g.KR)(window.innerWidth<=768),u=(0,a.EW)((()=>!!localStorage.getItem("kakao_token"))),c=()=>{u.value?(t.value=pe.getCurrentWishlist(),k()):t.value=[]},v=e=>e?`https://image.tmdb.org/t/p/w300${e}`:"/placeholder-image.jpg",d=()=>{if(!e.value)return;const t=e.value,o=t.offsetWidth,i=window.innerHeight-t.offsetTop,a=r.value?90:220,l=r.value?150:330,u=r.value?10:15,c=-10;n.value=Math.floor(o/(a+u));const v=Math.floor(i/(l+c));s.value=n.value*v,k()},k=()=>{const e=(l.value-1)*s.value,i=e+s.value,a=t.value.slice(e,i);o.value=a.reduce(((e,t,o)=>{const i=Math.floor(o/n.value);return e[i]||(e[i]=[]),e[i].push(t),e}),[])},p=(0,a.EW)((()=>Math.ceil(t.value.length/s.value))),h=()=>{l.value<p.value&&(l.value++,k())},m=()=>{l.value>1&&(l.value--,k())},f=e=>{u.value?(pe.toggleWishlist(e),c()):alert("위시리스트를 사용하려면 로그인이 필요합니다.")},w=e=>pe.isInWishlist(e),b=()=>{r.value=window.innerWidth<=768,d()};return(0,a.wB)((()=>pe.wishlist$.value),(()=>{c()})),(0,a.sV)((()=>{c(),d(),window.addEventListener("resize",b)})),(0,a.hi)((()=>{window.removeEventListener("resize",b)})),{gridContainer:e,wishlistMovies:t,visibleWishlistMovies:o,currentView:i,currentPage:l,rowSize:n,moviesPerPage:s,totalPages:p,isMobile:r,isLoggedIn:u,getImageUrl:v,nextPage:h,prevPage:m,toggleWishlist:f,isMovieInWishlist:w}}};const Ct=(0,s.A)(bt,[["render",wt],["__scopeId","data-v-72367227"]]);var _t=Ct,Lt={name:"HomeWishlist",components:{MovieWishlist:_t}};const It=(0,s.A)(Lt,[["render",rt]]);var Kt=It;const yt=[{path:"/",component:N,children:[{path:"",name:"HomeMain",component:fe},{path:"wishlist",name:"HomeWish",component:Kt},{path:"popular",name:"HomePopular",component:He},{path:"/Search",component:st}]},{path:"/signIn",name:"SignIn",component:h},{path:"/:catchAll(.*)",redirect:"/"}],Et=(0,c.aE)({history:(0,c.LA)(),routes:yt});var Mt=Et,Rt=o(782);class Wt{static isLoggedIn(){return!!localStorage.getItem("Kakao-Token")}static getToken(){return localStorage.getItem("Kakao-Token")}static logout(){localStorage.removeItem("Kakao-Token")}}var Xt=(0,Rt.y$)({state:{isLoggedIn:Wt.isLoggedIn(),userNickname:"",userProfileImage:"",userEmail:""},mutations:{login(e,t){e.isLoggedIn=!0,e.userNickname=t.nickname,e.userProfileImage=t.profileImage,e.userEmail=t.email},logout(e){e.isLoggedIn=!1,e.userNickname="",e.userProfileImage="",e.userEmail=""}},actions:{setLogin({commit:e},t){e("login",t)},setLogout({commit:e}){Wt.logout(),e("logout")}}}),Pt=o(5847);const St=(0,i.Ef)(u);window.Kakao.isInitialized()||window.Kakao.init("27d7fae4bb996ac3f5874f779a8f0df8"),St.use(Pt.A,{preLoad:1.3,error:"/default-image.jpg",loading:"/loading-spinner.gif",attempt:1}),St.use(Xt).use(Mt).mount("#app")}},t={};function o(i){var a=t[i];if(void 0!==a)return a.exports;var l=t[i]={exports:{}};return e[i].call(l.exports,l,l.exports,o),l.exports}o.m=e,function(){var e=[];o.O=function(t,i,a,l){if(!i){var n=1/0;for(c=0;c<e.length;c++){i=e[c][0],a=e[c][1],l=e[c][2];for(var s=!0,r=0;r<i.length;r++)(!1&l||n>=l)&&Object.keys(o.O).every((function(e){return o.O[e](i[r])}))?i.splice(r--,1):(s=!1,l<n&&(n=l));if(s){e.splice(c--,1);var u=a();void 0!==u&&(t=u)}}return t}l=l||0;for(var c=e.length;c>0&&e[c-1][2]>l;c--)e[c]=e[c-1];e[c]=[i,a,l]}}(),function(){o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,{a:t}),t}}(),function(){o.d=function(e,t){for(var i in t)o.o(t,i)&&!o.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})}}(),function(){o.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={524:0};o.O.j=function(t){return 0===e[t]};var t=function(t,i){var a,l,n=i[0],s=i[1],r=i[2],u=0;if(n.some((function(t){return 0!==e[t]}))){for(a in s)o.o(s,a)&&(o.m[a]=s[a]);if(r)var c=r(o)}for(t&&t(i);u<n.length;u++)l=n[u],o.o(e,l)&&e[l]&&e[l][0](),e[l]=0;return o.O(c)},i=self["webpackChunkmovie"]=self["webpackChunkmovie"]||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))}();var i=o.O(void 0,[504],(function(){return o(8582)}));i=o.O(i)})();
//# sourceMappingURL=app.1bf68832.js.map